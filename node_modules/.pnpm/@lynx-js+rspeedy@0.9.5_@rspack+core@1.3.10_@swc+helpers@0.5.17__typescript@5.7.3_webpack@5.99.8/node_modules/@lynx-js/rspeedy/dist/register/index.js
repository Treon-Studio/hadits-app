import * as __WEBPACK_EXTERNAL_MODULE_node_module_ab9f2194__ from "node:module";
function register() {
    if (!__WEBPACK_EXTERNAL_MODULE_node_module_ab9f2194__["default"].register) throw new Error([
        `This version of Node.js (${process.version}) does not support module.register(). You can either:`,
        "  - Upgrade to Node.js v18.19 or v20.6 and above",
        "  - Use `lynx.config.js` instead of `lynx.config.ts`"
    ].join('\n'));
    const { port1, port2 } = new MessageChannel();
    __WEBPACK_EXTERNAL_MODULE_node_module_ab9f2194__["default"].register(`./hooks.js?${Date.now()}`, import.meta.url, {
        parentURL: import.meta.url,
        data: {
            port: port2
        },
        transferList: [
            port2
        ]
    });
    return function() {
        port1.postMessage('deactivate');
    };
}
export { register };
